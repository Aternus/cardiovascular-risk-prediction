# Cardiovascular Risk Prediction System - Design Review

## Terms

1. ESC: European Society of Cardiology
2. EAPC: European Association of Preventive Cardiology
3. AHA: American Heart Association, https://www.heart.org/
4. ACC: American College of Cardiology, https://www.acc.org/
5. PCEs: Pooled Cohort Equations
6. PREVENT: Predict Risk of cardiovascular EVENTs (American Heart Association
   PREVENT‚Ñ¢)

## Algorithms

It seems that the optimal approach would be identifying the region of the
patient first and then selecting the appropriate algorithm for risk calculation.

Available algorithms and sources:

1. Europe
   1. HeartScore:
      https://www.heartscore.org/en_GB/heartscore-europe-risk-regions
      1. Uses the SCORE2 and SCORE2-OP algorithms
      2. ‚ùóIncludes Israel
   2. QRISK: https://qrisk.org/
      1. Uses the QRISK3-2018 algorithm
      2. Focus on UK
2. United States
   1. Pooled Cohort Equations (PCEs) 2018:
      https://www.msdmanuals.com/professional/multimedia/clinical-calculator/cardiovascular-risk-assessment-10-year-revised-pooled-cohort-equations-2018
   2. PREVENT:
      1. Main landing page:
         https://professional.heart.org/en/guidelines-and-statements/about-prevent-calculator
      2. Announcement: https://ahahealthtech.org/prevent-risk-calculator/

BMI Calculator: https://www.calculator.net/bmi-calculator.html

### AHA PREVENT

AHA PREVENT is the newest algorithm available created using US population data.

Here is the comparison of PCEs vs. AHA PREVENT vs. SCORE2/OP/DM:
https://academic.oup.com/eurheartj/article/46/Supplement_1/ehaf784.4553/8308412

üìù I've applied to their research program to gain access to the algorithm
implementation on GitHub.

## Existing Products

Some existing products can fit our requirements.

### ClinCalc

Website: https://clincalc.com/Cardiology/

1. PREVENT 2023: https://clincalc.com/Cardiology/PREVENT/
2. PCEs 2013: https://clincalc.com/Cardiology/ASCVD/PooledCohort.aspx

### MdCalc

Website: https://www.mdcalc.com

1. PREVENT 2023:
   https://www.mdcalc.com/calc/10491/predicting-risk-cardiovascular-disease-events-prevent
2. PCEs 2013:
   https://www.mdcalc.com/calc/3400/ascvd-atherosclerotic-cardiovascular-disease-risk-algorithm-including-known-ascvd-aha-acc

### ACC.org

Website: https://tools.acc.org/

1. ASCVD Risk Estimator Plus:
   https://tools.acc.org/ascvd-risk-estimator-plus/#!/calculate/estimate/

### U-Prevent

Website: https://u-prevent.com/

1. Guidelines: https://u-prevent.com/manual/guidelines
2. Calculators: https://u-prevent.com/manual/calculators

## Conclusions

For the scope of this design, we will focus on patients in the US using the
`PREVENT 2023` algorithm.

### Algorithm

Algorithm explanation:

1. Estimate the risk of a first cardiovascular event in the next 10 and 30
   years.
2. These are composite probabilities. A person could have more than one event
   over the time window, the model is estimating the probability of the _first_
   event of each type.
   1. ASCVD Risk ‚âà CHD + Stroke
   2. CVD Risk ‚âà ASCVD + HF

Algorithm elements:

1. CHD (coronary heart disease): myocardial infarction (heart attack)
2. Stroke: an ischemic or hemorrhagic stroke
3. HF (heart failure): hospitalization for heart failure
4. ASCVD (atherosclerotic cardiovascular disease): risk of myocardial infarction
   (heart attack), fatal coronary heart disease, or stroke (ischemic or
   hemorrhagic).
   1. ‚ö†Ô∏è `ASCVD` is a composite umbrella for `CHD + Stroke`
5. Total CVD (cardiovascular disease): any ASCVD event (CHD or stroke) and HF
   event.
   1. ‚ö†Ô∏è `Total CVD` is a composite umbrella for `ASCVD + HF`

### Risk Interpretation

Source: https://www.ahajournals.org/doi/10.1161/cir.0000000000000678

The AHA provides this interpretation of 10-yr risk of CVD:

- Low risk: <5%
- Borderline risk: 5% to 7.4%
- Intermediate risk: 7.5% to 19.9%
- High risk: ‚â•20%

#### Urgency

For the scope of this design, we will use the events CHD / Heart Attack, Stroke
and HF and sort them in accordance with their probability.

‚ö†Ô∏è ASCVD is a composite and not a distinct event.

---

## MVP Scope

1. Manage patient information
   1. Web portal with AuthN (using a magic link)
   2. Web form to collect the information required by the PREVENT model
   3. Web form with optional fields for future use
   4. Allow the patient to edit the form
      - Copy the values from the original submission into a new form, only save
        when submitted
2. Provide personalized results
   1. Your risk of having a Cardiovascular (CV) Event with the next 10 years is
      `totalCVD`
   2. According to the AHA Cardiovascular Disease (CVD) interpretation, it is
      considered:
      1. Low
      2. Borderline
      3. Intermediate
      4. High
   3. Break down of CV events ranked by probability:
      1. CHD
      2. Stroke
      3. HF
   4. Contribution of each Risk Factor:
      - Each factor affecting 10-year ASCVD risk can be measured on its own,
        whether it is protective (reducing risk) or harmful (increasing risk).
      1. Age
      2. Total Cholesterol
      3. Systolic BP
      4. HDL
      5. eGFR

   5. Actionable suggestions (rule-based)

## MVP Out of Scope

1. Provide personalized results
   1. Long-term: route to the correct model(s) by region of the patient.
      - For the MVP: US-> PREVENT model.
   2. Sudden Cardiac Death, PAD, Aortic Disease risks.
      - The PREVENT model doesn't support it.
      - In the future: perhaps use additional models to get the data or train
        our own model.
   3. Urgency formula:
      - The PREVENT model outputs percentages compatible to CVD risk
        interpretation by AHA.
      - Stick to clinically validated CVD risk interpretation by AHA.
      - In the future: perhaps give weights to the events (e.g. HF=1.0,
        Stroke=1.0, CHD=0.9), this needs more research.
2. Security
   1. Encryption at rest
   2. Legal disclaimers

## Data Model

1. Normalize Units to a US region:
   - `mmol/L` -> `mg/dL`
   - `cm` -> `in`
   - `kg` -> `lbs`

## Use Case: Healthy 36 years old

Input:

```json
{
  "age": 36,
  "gender": "Male",
  "totalCholesterol": {
    "value": 150,
    "unit": "mg/dL"
  },
  "hdlCholesterol": {
    "value": 60,
    "unit": "mg/dL"
  },
  "systolicBP": {
    "value": 120,
    "unit": "mmHg"
  },
  "bmi": {
    "value": 22.6,
    "unit": "kg/m¬≤",
    "height": {
      "value": 182,
      "unit": "cm"
    },
    "weight": {
      "value": 75,
      "unit": "kg"
    }
  },
  "eGFR": {
    "value": 100,
    "unit": "mL/min/1.73 m¬≤"
  },
  "diabetes": false,
  "smoker": false,
  "takingAntihypertensive": false,
  "takingStatin": false
}
```

Output:

```json
[
  {
    "region": "US",
    "model": "PREVENT",
    "modelVersion": "2023",
    "timeHorizon": "10_YEARS",
    "setName": "RISKS",
    "setUnits": "%",
    "data": {
      "totalCVD": "0.62",
      "ASCVD": "0.40",
      "heartFailure": "0.26",
      "coronaryHeartDisease": "0.16",
      "stroke": "0.28"
    },
    "calculatedAt": 1768150242
  }
]
```

## Security & Privacy

Since we are going to store patient info and show medical scores and
recommendations:

1. Legal: disclaimers about legal implications and responsibilities
2. Data storage: encrypt at rest; store only fields needed for the model
3. Logging policy: structured logs with request IDs; redact payloads; audit
   access; DON'T LOG PHI.
4. Secrets: env vars (secret manager in production)

---

## Next Steps

### Risk Prediction Models

In order to support other regions, we ought to add new models for risk
assessment.

### Security & Privacy

Splitting the data by regulatory regions: Europe + UK (GDPR), US California
(CCPA), Rest of the World.

### Additional Inputs

The next step for such a system could be incorporation of a Machine Learning
model trained on a data set of patients.

I suggest we collect data we consider valuable as soon as possible for future
use (currently marking it optional in the UI).

Fields:

1. Family history (early cardiovascular disease in close relatives)
2. Medications:
   - Blood Pressure
   - Cholesterol
   - Diabetes
3. Symptom flags (important for "urgency"):
   - Chest pain/pressure now or recent
   - Shortness of breath at rest
   - Fainting/near-fainting
   - New neurologic symptoms (speech trouble/one-sided weakness)
   - Palpitations (optional, for arrhythmia risk)
4. Activity level (physical)
